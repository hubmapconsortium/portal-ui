{% extends 'pages/base.html' %}

{% block extra_stylesheets %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/searchkit/2.0.0/theme.css">
{% endblock %}

{% block title %}
  <h1 class="no-content">{% block title_text %}Search{% endblock %}</h1>
{% endblock %}

{% block content %}
<div id="search"></div>
{% endblock %}

{% block extra_scripts %}
<script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script src="https://unpkg.com/@hubmap/portal-search@v0.0.2/umd/@hubmap/portal-search.min.js"></script>

  <script>
    hubmapPortalSearch.renderSearch(
      // ID of element to replace with search component:
      'search',
      {
        // Elasticsearch instance to hit with queries:
        apiUrl: 'https://search-hubmap-entity-es-dev-zhdpuhhf2vjpvqfq7zmn2gdgqq.us-east-1.es.amazonaws.com/entities/',
        // Fields to search, and whether they have extra weight:
        prefixQueryFields: ['description'],
        // Prefix for details links:
        detailsUrlPrefix: '/details/',
        // Search results field which will be appended to detailsUrlPrefix:
        idField: 'id',
        // Search results fields to display in table:
        resultFields: ['display_doi', 'description'],
        // Default hitsPerPage is 10:
        hitsPerPage: 20,
        // Sidebar facet configuration;
        // "type" should be one of the filters described here:
        // http://docs.searchkit.co/stable/components/navigation/
        filters: [
          {
            type: 'HierarchicalMenuFilter',
            props: {
              id: 'categories',
              fields: ['type.raw', 'genres.raw'],
              title: 'Categories',
            },
          },
          {
            type: 'RefinementListFilter',
            props: {
              id: 'actors',
              title: 'Actors',
              field: 'actors.raw',
              operator: 'AND',
              size: 10
            },
          }
        ]
      }
    );
  </script>
{% endblock %}
